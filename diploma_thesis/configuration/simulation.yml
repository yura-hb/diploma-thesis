
simulation: &simulation
  name: ''
  kind: 'dynamic'
  parameters:
    configuration:
      timespan: 5000
      machines_per_work_center: 5
      work_center_count: 5
      pre_assign_initial_jobs: True

    job_sampler:
      kind: 'dynamic'
      parameters:
        processing_times: # Sampler
          kind: 'uniform'
          parameters:
            uniform: [ 10, 30 ]
            noise: [ 0, 3 ]
        permutation:
          uneveness: 5
        due_time: # Sampler
          kind: 'uniform'
          parameters:
            uniform: [ 0, 0.2 ]
        job_arrival_time_on_machine:
          kind: 'sampler'
          parameters:
            sampler:
              kind: 'uniform'
              parameters:
                uniform: [ 1, 100 ]

    breakdown:
      kind: 'dynamic'
      parameters:
        breakdown_arrival:
          kind: 'exponential'
          parameters:
              mean: 1000
        repair_duration:
          kind: 'uniform'
          parameters:
              uniform: [ 200, 500 ]

    seed: 42

task:
  kind: 'task'

  machine_agent:
    kind: 'static'
    parameters:
      model:
        kind: 'static'
        parameters:
          rule: 'random'
      encoder:
        kind: 'deep_marl_indirect'

  work_center_agent:
    kind: 'static'
    parameters:
      model:
        kind: 'static'
        parameters:
          rule: 'random'
      encoder:
        kind: 'plain'

  simulator:
    # Can be 'td'. Important for reinforcement learning
    kind: 'episodic'

  run:
    timeline:
      warmup:
        - 10
        - 100

      duration: 10000

    machine_train_schedule:
      pretrain_steps: 10
      train_interval: 100
      max_training_steps: 1000

    work_center_train_schedule:
      pretrain_steps: 10
      train_interval: 100
      max_training_steps: 1000

    n_workers: 2
    simulations:
      - <<: *simulation
      - <<: *simulation
      - <<: *simulation
      - <<: *simulation

  evaluate:
    n_workers: 2
    simulations:
      - <<: *simulation
